<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Udns (udns.Udns)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">udns</a> &#x00BB; Udns</nav><h1>Module <code>Udns</code></h1><p>µDNS - an opinionated Domain Name System (DNS) library</p><p>The Domain Name System is a hierarchical and decentralized naming system used on the Internet. It associates domain names with nearly arbitrary information. Best known is the translation of easily memoizable domain names to numerical IP addresses, which are used by computers for establishing communication channels - so called <a href="A/index.html"><span>address</span></a> records. DNS has been deployed since 1985 on the Internet. It is a widely deployed, fault-tolerant, distributed key-value store with built-in caching mechanisms. The keys are <span class="xref-unresolved" title="unresolved reference to &quot;Domain_name&quot;"><span>domain names</span></span> and <a href="../Udns_enum/index.html#type-rr_typ"><span>record type</span></a>, the values are record sets. Each record set has a time-to-live associated with it: the maximum time this entry may be cached. The <a href="https://github.com/hannesm/domain-name">domain name</a> library provides operations on domain names, which have a restricted character set (letters, digits, hyphen), and comparison is defined case-insensitively.</p><p>A set of 13 authoritative name servers form the root zone which delegate authority for subdomains to registrars (using country codes, etc.), which delegate domains to individuals who host their Internet presence there.</p><p>The delegation mechanism utilizes the DNS protocol itself, using <a href="Ns/index.html"><span>name server</span></a> records, and <a href="Soa/index.html"><span>start of authority</span></a> records. The globally federated eMail system uses <a href="Mx/index.html"><span>mail exchange</span></a> records.</p><p>Each Internet domain has at least two authoritative name servers registered to enable fault tolerance. To keep these synchronised, a zone transfer mechanism is part of DNS. In-protocol DNS extension mechanisms include dynamic updates, authentication, and notifications, which allow arbitrary synchronized, authenticated modifications.</p><p>From a client perspective, the C library functions <code>gethostbyname</code> or <code>getaddrinfo</code> are mainly used, which receive a string (and a record type) and return a reply. A client requests a caching recursive resolver hosted close to the client - e.g. at their ISP, and awaits an answer. The recursive resolver iterates over the domain name parts, and requests the registered authoritative name servers, until the name server responsible for the requested domain name is found.</p><p>The core µDNS library includes type definitions of supported record types, decoding and encoding thereof to the binary protocol used on the Internet, also serialising and parsing of the standardized text form. The record types and their values are defined by the <a href="Rr_map/index.html#type-k"><span>key</span></a> type, which has for each record type a specific value type, using a generalized algebraic data type -- i.e. an address record may only contain a time-to-live and a set of IPv4 addresses. This is used to construct a <span class="xref-unresolved" title="unresolved reference to &quot;Gmap&quot;"><span>map</span></span> data structure.</p><p>This core µDNS library is used by various DNS components:</p><ul><li><code>Udns_tsig</code> implements TSIG authentication</li><li><code>Udns_server</code> implements the authoritative server logic</li><li><code>Udns_client</code> implements a client API</li><li><code>Udns_zonesfile</code> implements the zone file parser</li><li><code>Udns_resolver</code> implements the resolver logic</li></ul><p>These core libraries are pure, i.e. it is independent of network communnication, uses immutable values, and errors are explicit as <code>result</code> type. Timestamps are passed in to the main handle functions. Some components, such as a secondary server, which needs to check freshness of its data in regular intervals. The logic is implemented and exposed as function, which needs to be called from a side-effecting layer.</p><p>For the client library, several side-effecting layers are implemented: <code>udns-client-unix</code> uses the blocking <code>Unix</code> API, <code>udns-client-lwt</code> uses the non-blocking <code>Lwt</code>, and <code>udns-mirage-client</code> using MirageOS interfaces. Unix command line utilities are provided in the <code>udns-cli</code> package.</p><p>For the server and resolver components, side-effecting implementations using MirageOS interfaces are provided in <code>udns-mirage-server</code> and <code>udns-mirage-resolver</code>. Some <a href="https://github.com/roburio/unikernels">example unikernels</a> are provided externally, including authoritative primary and secondary servers, recursive and stub resolvers.</p><p>The DNS protocol (<a href="Txt/index.html"><span>TXT</span></a> records) are used by the certificate authority <a href="https://letsencrypt">Let's Encrypt</a> to provision X.509 certificates which are trusted by web browsers. µDNS together with <a href="https://github.com/mmaker/ocaml-letsencrypt">ocaml-letsencrypt</a> can be used to provision certificate signing requests for your domain. The certificate signing request and certificate are both stored as <a href="Tlsa/index.html"><span>TLSA</span></a> records in DNS.</p><p><em>c64ad9c - <a href="https://github.com/roburio/udns">homepage</a></em></p></header><dl><dt class="spec type" id="type-proto"><a href="#type-proto" class="anchor"></a><code><span class="keyword">type</span> proto</code> = <code>[ </code><table class="variant"><tr id="type-proto.Tcp" class="anchored"><td class="def constructor"><a href="#type-proto.Tcp" class="anchor"></a><code>| </code><code>`Tcp</code></td></tr><tr id="type-proto.Udp" class="anchored"><td class="def constructor"><a href="#type-proto.Udp" class="anchor"></a><code>| </code><code>`Udp</code></td></tr></table><code> ]</code></dt><dd><p>The type of supported protocols. Used by <a href="Packet/index.html#val-encode"><code>Packet.encode</code></a> to decide on maximum buffer length, etc.</p></dd></dl><dl><dt class="spec module" id="module-Soa"><a href="#module-Soa" class="anchor"></a><code><span class="keyword">module</span> <a href="Soa/index.html">Soa</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Start of authority</p></dd></dl><dl><dt class="spec module" id="module-Ns"><a href="#module-Ns" class="anchor"></a><code><span class="keyword">module</span> <a href="Ns/index.html">Ns</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Name server</p></dd></dl><dl><dt class="spec module" id="module-Mx"><a href="#module-Mx" class="anchor"></a><code><span class="keyword">module</span> <a href="Mx/index.html">Mx</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Mail exchange</p></dd></dl><dl><dt class="spec module" id="module-Cname"><a href="#module-Cname" class="anchor"></a><code><span class="keyword">module</span> <a href="Cname/index.html">Cname</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Canonical name</p></dd></dl><dl><dt class="spec module" id="module-A"><a href="#module-A" class="anchor"></a><code><span class="keyword">module</span> <a href="A/index.html">A</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Adress record</p></dd></dl><dl><dt class="spec module" id="module-Aaaa"><a href="#module-Aaaa" class="anchor"></a><code><span class="keyword">module</span> <a href="Aaaa/index.html">Aaaa</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Quad A record</p></dd></dl><dl><dt class="spec module" id="module-Ptr"><a href="#module-Ptr" class="anchor"></a><code><span class="keyword">module</span> <a href="Ptr/index.html">Ptr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Domain name pointer</p></dd></dl><dl><dt class="spec module" id="module-Srv"><a href="#module-Srv" class="anchor"></a><code><span class="keyword">module</span> <a href="Srv/index.html">Srv</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Service record</p></dd></dl><dl><dt class="spec module" id="module-Dnskey"><a href="#module-Dnskey" class="anchor"></a><code><span class="keyword">module</span> <a href="Dnskey/index.html">Dnskey</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>DNS keys</p></dd></dl><dl><dt class="spec module" id="module-Caa"><a href="#module-Caa" class="anchor"></a><code><span class="keyword">module</span> <a href="Caa/index.html">Caa</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Certificate authority authorization</p></dd></dl><dl><dt class="spec module" id="module-Tlsa"><a href="#module-Tlsa" class="anchor"></a><code><span class="keyword">module</span> <a href="Tlsa/index.html">Tlsa</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Transport layer security authentication</p></dd></dl><dl><dt class="spec module" id="module-Sshfp"><a href="#module-Sshfp" class="anchor"></a><code><span class="keyword">module</span> <a href="Sshfp/index.html">Sshfp</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Secure shell fingerprint</p></dd></dl><dl><dt class="spec module" id="module-Txt"><a href="#module-Txt" class="anchor"></a><code><span class="keyword">module</span> <a href="Txt/index.html">Txt</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Text records</p></dd></dl><dl><dt class="spec module" id="module-Tsig"><a href="#module-Tsig" class="anchor"></a><code><span class="keyword">module</span> <a href="Tsig/index.html">Tsig</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Transaction signature</p></dd></dl><dl><dt class="spec module" id="module-Edns"><a href="#module-Edns" class="anchor"></a><code><span class="keyword">module</span> <a href="Edns/index.html">Edns</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Extensions to DNS</p></dd></dl><dl><dt class="spec module" id="module-Rr_map"><a href="#module-Rr_map" class="anchor"></a><code><span class="keyword">module</span> <a href="Rr_map/index.html">Rr_map</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>A map whose key are record types and their values are the time-to-live and the record set. The relation between key and value type is restricted by the below defined GADT.</p></dd></dl><dl><dt class="spec module" id="module-Name_rr_map"><a href="#module-Name_rr_map" class="anchor"></a><code><span class="keyword">module</span> <a href="Name_rr_map/index.html">Name_rr_map</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Name resource record map</p></dd></dl><dl><dt class="spec module" id="module-Packet"><a href="#module-Packet" class="anchor"></a><code><span class="keyword">module</span> <a href="Packet/index.html">Packet</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The DNS packet.</p></dd></dl><div class="spec module" id="module-Tsig_op"><a href="#module-Tsig_op" class="anchor"></a><code><span class="keyword">module</span> <a href="Tsig_op/index.html">Tsig_op</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>